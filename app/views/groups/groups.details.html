<div class="animated fadeIn"
     ng-init="vm.methods.onDisplayDetails()">
  <div class="row">
    <div class="col-xs-12">

      <div class="atom-profile">

        <!-- Profile card -->
        <div class="profile-card">
          <img class="img-circle img-thumbnail"
               ng-src="{{ vm.methods.getGroupPicture(vm.details.group.name, vm.details.group.picture.result.url) }}">
          <div class="text">
            <div class="center-flex-content flex-start">
              <h3>{{ vm.details.group.name }}</h3>
              <cozen-tooltip ng-show="vm.details.group.userRoles.isCreator"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-label="'groups_creator_in' | translate:{'date': (vm.details.group.date.creation * 1000 | date: 'EEEE dd MMMM yyyy')}">
                <mark class="atom-mark creator space-small-left">{{ 'groups_creator' | translate }}</mark>
              </cozen-tooltip>
              <cozen-tooltip ng-show="vm.details.group.userRoles.isMember"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-label="'groups_member_since' | translate:{'date': (vm.details.group.userRoles.joined * 1000 | date: 'EEEE dd MMMM yyyy')}">
                <mark class="atom-mark member space-small-left">{{ 'groups_member' | translate }}</mark>
              </cozen-tooltip>
              <cozen-tooltip ng-show="vm.details.group.userRoles.isAdmin"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-label="'groups_member_since' | translate:{'date': (vm.details.group.userRoles.joined * 1000 | date: 'EEEE dd MMMM yyyy')}">
                <mark class="atom-mark admin space-small-left">{{ 'groups_admin' | translate }}</mark>
              </cozen-tooltip>
              <cozen-tooltip ng-show="vm.details.group.userRoles.isBanned"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-type-html
                             cozen-tooltip-label="'groups_banned_since' | translate:{'date': (vm.details.group.userRoles.banned.on * 1000 | date: 'EEEE dd MMMM yyyy'), 'userName': vm.details.group.userRoles.banned.by, 'for': vm.details.group.userRoles.banned.for}">
                <mark class="atom-mark banned space-small-left">{{ 'groups_banned' | translate }}</mark>
              </cozen-tooltip>
              <cozen-tooltip ng-show="vm.details.group.userRoles.isKicked"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-type-html
                             cozen-tooltip-label="'groups_kicked_since' | translate:{'date': (vm.details.group.userRoles.kicked.on * 1000 | date: 'EEEE dd MMMM yyyy'), 'userName': vm.details.group.userRoles.kicked.by, 'for': vm.details.group.userRoles.kicked.for, 'time': (vm.methods.getKickedTime(vm.details.group.userRoles.kicked.time).key | translate)}">
                <mark class="atom-mark kicked space-small-left">{{ 'groups_kicked' | translate }}</mark>
              </cozen-tooltip>
            </div>
            <p class="help-text">{{ vm.details.group.description }}</p>
            <div>
              <cozen-tooltip cozen-tooltip-label="'groups_details_quicklink_tooltip' | translate:{groupName: vm.details.group.name}"
                             cozen-tooltip-placement="auto bottom"
                             cozen-tooltip-type-html>
                <h4>
                  <a href>{{ vm.details.group.quicklink }}</a>
                </h4>
              </cozen-tooltip>
              <cozen-tooltip cozen-tooltip-label="'groups_details_quicklink_copy'">
                <i class="fa fa-fw fa-copy atom-icon-btn purple"
                   ngclipboard
                   data-clipboard-text="{{ vm.details.group.quicklink }}">
                </i>
              </cozen-tooltip>
            </div>
          </div>
        </div>

        <hr>

        <!-- Details -->
        <h3>{{ 'groups_details_details' | translate }}</h3>
        <h4>
          <strong>{{ 'groups_details_creator' | translate }}:</strong>
          {{ vm.details.group.creator }}
        </h4>
        <h4>
          <strong>{{ 'groups_details_creation' | translate }}:</strong>
          {{ vm.details.group.date.creation * 1000 | date: 'EEEE dd MMMM yyyy' }}
        </h4>
        <h4 class="no-margin-bottom">
          <strong>{{ 'groups_details_last_update' | translate }}:</strong>
          {{ vm.details.group.date.lastUpdate * 1000 | date: 'EEEE dd MMMM yyyy' }}
        </h4>

        <!-- Stats -->
        <h3>{{ 'groups_details_stats' | translate }}</h3>
        <h4>
          <strong>{{ 'groups_details_memberLength' | translate }}:</strong>
          {{ vm.details.group.users.length }}
        </h4>
        <h4 class="no-margin-bottom">
          <strong>{{ 'groups_details_channelsLength' | translate }}:</strong>
          {{ vm.details.group.channels.length }}
        </h4>
      </div>

      <!-- Join group btn -->
      <cozen-btn ng-show="!vm.details.userIsInGroup"
                 cozen-btn-label="groups_details_join_group"
                 cozen-btn-auto-sizing="true"
                 cozen-btn-on-click="vm.methods.joinGroup(vm.details.group.name)"
                 cozen-btn-class="space-medium-after">
      </cozen-btn>

      <div class="center-flex-content space-medium-after"
           ng-show="vm.details.userIsInGroup">

        <!-- Edit btn -->
        <cozen-btn ng-show="vm.details.userIsAdmin"
                   cozen-btn-label="groups_details_edit_group"
                   cozen-btn-auto-sizing="true"
                   cozen-btn-on-click="goTo.view('app.groups.edit', {'groupName': vm.details.group.name})">
        </cozen-btn>

        <!-- Leave btn -->
        <a href
           onclick="this.blur()"
           ng-click="vm.methods.leaveGroup(vm.details.group.name)">
          {{ 'groups_details_leave_group' | translate }}
        </a>
      </div>
    </div>
  </div>
</div>
