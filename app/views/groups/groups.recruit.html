<div class="animated fadeIn"
     ng-init="vm.methods.onDisplayDetails(); vm.methods.onRecruitInit();">
  <div class="row">
    <div class="col-xs-12">

      <!-- Title -->
      <h3>{{ 'groups_recruit_title' | translate:{groupName: vm.params.groupName} }}</h3>
      <p class="help-text">{{ 'groups_recruit_subtitle_1' | translate }}</p>
      <p class="help-text">{{ 'groups_recruit_subtitle_2' | translate }}</p>

      <!-- Quicklink -->
      <!--<div ng-include="'views/groups/common/quicklink.html'"></div>-->

      <!-- Invite by username -->
      <div class="row space-medium-before">
        <div class="col-xs-12 col-sm-8">
          <cozen-form cozen-form-name="recruit"
                      cozen-form-ctrl="vm"
                      cozen-form-model="form">

            <!-- Select Cogeo members -->
            <cozen-dropdown cozen-dropdown-model="vm.availableUsersSelected"
                            cozen-dropdown-label="groups_recruit_cogeoUsers_dropdown_label"
                            cozen-dropdown-multiple="true"
                            cozen-dropdown-model-enhanced="count"
                            cozen-dropdown-class="space-small-after"
                            cozen-dropdown-success-design="false"
                            cozen-dropdown-error-design="false"
                            cozen-dropdown-all-selected-text="groups_recruit_cogeoUsers_dropdown_allSelectedText"
                            cozen-dropdown-count-text="groups_recruit_cogeoUsers_dropdown_countText"
                            cozen-dropdown-placeholder="groups_recruit_cogeoUsers_dropdown_pc">
              <cozen-dropdown-item-search cozen-dropdown-item-search-placeholder="groups_recruit_cogeoUsers_dropdown_search_pc"
                                          cozen-dropdown-item-search-empty-text="groups_recruit_cogeoUsers_dropdown_search_empty">
              </cozen-dropdown-item-search>
              <cozen-dropdown-item-simple ng-repeat="user in vm.availableUsers track by $index"
                                          cozen-dropdown-item-simple-value="user.username"
                                          cozen-dropdown-item-simple-sub-label="@{{ user.username }}"
                                          cozen-dropdown-item-simple-selected="user.isSelected"
                                          cozen-dropdown-item-simple-label="{{ user.givenName + ' ' + user.surname }}">
              </cozen-dropdown-item-simple>
            </cozen-dropdown>
            <p class="help-text space-medium-after">{{ 'groups_recruit_cogeoUsers_dropdown_help' | translate }}</p>

            <!-- List of selected Cogeo members -->
            <h4 ng-if-start="vm.availableUsersSelected.length > 0"
                class="space-small-after">
              {{ 'groups_recruit_cogeoUsers_selected' | translate }}
            </h4>
            <div class="atom-inline-list space-base-after">
              <div ng-if="user.isSelected"
                   ng-repeat="user in vm.availableUsers track by $index"
                   class="atom-list-item-container">
                <div class="atom-inline-item"
                     style="animation-delay: {{ 50 * $index + 'ms' }};"
                     ng-class="[$last ? 'border-bottom' : '']">
                  <span>
                    {{ user.givenName + ' ' + user.surname }}
                    <small>
                      <a href
                         ng-click="goTo.view('app.profiles.user', {username: user.username})">
                        @{{ user.username }}
                      </a>
                    </small>
                  </span>
                </div>
                <div class="atom-remove-btn"
                     ng-click="user.isSelected = false">
                  <i class="fa fa-fw fa-trash-o"></i>
                </div>
              </div>
            </div>
            <cozen-btn ng-if-end
                       cozen-btn-icon-right="fa fa-fw icons8-message-filled"
                       cozen-btn-label="vm.availableUsersSelected.length == 1 ? ('groups_recruit_cogeoUsers_submit_user' | translate:{username: vm.availableUsersSelected[0]}) : 'groups_recruit_cogeoUsers_submit_users'"
                       cozen-btn-auto-sizing="true"
                       cozen-btn-on-click="vm.methods.recruit('cogeoUsers')">
            </cozen-btn>
          </cozen-form>
        </div>
      </div>
    </div>
  </div>
</div>
